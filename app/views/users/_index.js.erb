$(document).ready(function(){
  var g = $('.gif');
  var times = 0
  var speed = 1500
  var arr = $('.arriba');
  var reg = $(".registro")
  var opa = .25

  // definicion funcion para que el gif aparesca y desparesca
  function moveButons() {
    $(arr).animate({
      height: "toggle",
    }, 1000, function() {
      // Animation complete.
    });
    $(reg).animate({
      opacity: opa,
      left: "-=100",
      // height: "toggle",
    }, speed, function() {
      // Animation complete.
    });
    opa = opa + opa;
    speed = speed - 100;
    $(arr).animate({
      height: "toggle",
    }, speed, function() {
      // Animation complete.
    });
    $(reg).animate({
      opacity: opa,
      left: "+=200",
      // height: "toggle",
    }, speed, function() {
      // Animation complete.
    });;
    opa = opa + opa;
    speed = speed - 100;
    $(arr).animate({
      height: "toggle",
    }, speed, function() {
      // Animation complete.
    });
    $(reg).animate({
      opacity: opa,
      left: "-=200",
      // height: "toggle",
    }, speed, function() {
      // Animation complete.
    })
    opa = opa + opa;
    speed = speed - 100;
    $(arr).animate({
      height: "toggle",
    }, speed, function() {
      // Animation complete.
    });
    $(reg).animate({
      opacity: opa,
      left: "+=100",
      // height: "toggle",
    }, speed, function() {
      // Animation complete.
    });;
    $(arr).animate({
      height: "toggle",
    }, speed, function() {
      // Animation complete.
    });


    times++;
    if (times<=0) {
      moveButons();
      // speed = speed - 753;
      console.log(speed);
    }
  };

  window.fbAsyncInit = function() {

     FB.init({
       appId      : '738636399658119',
       cookie     : true,
       xfbml      : true,
       version    : 'v2.10'
     });

    FB.getLoginStatus(function(response) {
      if (response.status === 'connected') {
        console.log('Logged in.');
        statusChangeCallback(response);
        console.log(response);
      }
      else {
        // console.log("no logged");
        // FB.login();
      }
    });

    // Person is now logged out
    // FB.logout(function(response) {
    // });

  //  FB.AppEvents.logPageView();
 };

 (function(d, s, id){
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
  // hechar a andar funcion
  // DESCOMENTAR para hacer funcionar la animacion
  // moveButons();


  // si hay un user loged
  if ("<%=session[:user_id]%>") {
    // mostrar mensajes y botones
    $("#messages").show();
    $("#buttons").show();
    $("#salir").show();

    // ocultar la vista modal de registro
    $("#log-modal").modal("hide");
    // ocultar botones de login y signup y fb
    $("#access").hide();
  }
});
